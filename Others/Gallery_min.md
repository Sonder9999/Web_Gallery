# 动漫图片网站需求文档

## 概述

一个用于托管和浏览动漫风格图片的网站，灵感来源于 Pixiv、Bilibili 和 Wallhaven.cc，具备标签、搜索、筛选、预览、下载和上传图片的功能。网站支持响应式设计、高级搜索功能和用户管理。

## 导航与布局

- **顶部导航栏**：
  - **组件**：
    - 网站 Logo（图片）。
    - 小图标用于页面跳转。
    - 搜索框（支持高级筛选和搜索历史）。
    - 用户名 + 头像（登录用户显示）。
  - **响应式行为**：
    - 屏幕缩小时的表现：
      - 用户名最先消失。
      - Logo 和头像随后消失。
      - 搜索框保留，导航图标移至页面底部（类似淘宝）。
  - **参考设计**：QQ 音乐、Pixiv、Wallhaven.cc。

## 图片标签系统

- **标签结构**：
  - 层级标签：
    - 大标签（如“米哈游”）包含小标签（如“原神”“崩坏三”）。
    - 角色标签（如“原神”包含“珊瑚宫心海”“可莉”）。
  - 标签类型：
    - 单一角色标签（如“Kokomi_Only”，仅包含心海的图片）。
    - 复合标签（如“Kokomi + 雷电将军”，包含多个角色的图片）。
  - 标签支持多语言及别名：
    - 示例：“珊瑚宫心海” = “心海” = “Kokomi”（不区分大小写） = “Sangonomiya Kokomi” = 日语“心海”。
    - 支持模糊搜索（别名、昵称、拼音，例如输入“xin”可联想“心海”“辛炎”）。
    - 搜索联想功能：输入“心”可提示“心海”“开心”等。
    - 支持非连续英文匹配（例如输入“x,i,n”可联想相关词，非必要连续）。
- **标签搜索**：
  - 根据单一或复合标签搜索图片。
  - 示例：搜索“Kokomi”返回“Kokomi_Only”及“Kokomi + 雷电将军”的图片。

## 图片搜索与筛选

- **按分辨率筛选**：
  - 预设选项：FHD (1080p)、2K、4K。
  - 自定义输入：宽度 x 高度，支持“至少”或“精确”分辨率选项。
- **按比例筛选**：
  - 预设选项：16:9（横屏）、21:9（宽屏）、9:16（竖屏）、1:1（方形）。
  - 自定义范围：使用滑块选择比例范围（如 3:1 到 4:5）。
  - 模糊匹配开关：
    - 默认关闭（精确匹配，例如 4:1）。
    - 开启后匹配范围（如 4:1 可匹配 3.5:1 到 4.4:1，四舍五入）。
    - 支持自定义范围选择（如 4:1 到 5:1）。
- **按来源筛选**：
  - 根据图片来源（如果提供）进行筛选。
- **高级搜索界面**：
  - **弹出式浮层**：
    - 点击搜索框触发，页面内容变暗/模糊，搜索界面浮于最上层。
  - **搜索历史**：
    - 显示最近 5–10 条搜索记录，以“胶囊”或“标签”形式展示。
    - 每条记录可点击直接搜索。
    - 提供“清空历史”按钮。
  - **标签筛选**：
    - 输入多个标签（回车生成可删除的“胶囊”）。
    - 支持 AND/OR 切换，决定是“同时包含”还是“包含任意一个”标签。
  - **推荐标签**：
    - 推荐常用标签（如角色名、热门标签）。

## 主页

- **图片预览**：
  - 以网格形式展示所有图片的缩略图。
  - 缩略图设置最大宽度和高度，自动排列横图和竖图。
- **鼠标悬停效果**：
  - 鼠标悬停时，图片大图预览显示：
    - 若缩略图在屏幕左侧，大图显示在右侧（反之亦然）。
    - 大图适配屏幕显示（不一定为原分辨率）。
- **批量下载**：
  - 支持批量下载主页预览的所有图片。
  - 未来扩展：支持自定义下载文件名。

## 图片详情页

- **内容**：
  - 显示完整图片（适配屏幕缩放）。
  - 显示关联标签（可点击，跳转至对应标签专区）。
  - 显示来源（若提供则显示，否则隐藏）。
  - 提供单个图片的下载按钮。
- **图片切换**：
  - 根据上一页面的上下文切换图片（例如在“Kokomi”或“Kokomi_Only”标签内切换）。
- **放大镜功能**：
  - 可开关的放大镜，放大图片局部细节。
  - 类似主页预览效果，但专注于特定区域。

## 标签专区

- **定义**：
  - 每个标签（例如“Kokomi”“Kokomi_Only”“复合标签”）拥有专属页面。
  - 专区封面为该标签下随机选择的图片。
- **功能**：
  - 展示该标签下的所有图片。
  - 可通过图片详情页的标签点击或搜索进入。

## 图片上传

- **上传页面**：
  - 用户可上传图片。
  - 标签选择：
    - 从现有标签中选择（或自动补全）。
    - 若无匹配标签，可创建新标签。
  - 来源字段（可选，默认为空）。
  - 可以批量上传
  - 以及选择标签,标签在图片下面排列(因为可能要选多个标签)
  - 如果批量上传图片,则每张图片都可以选择标签(就像gallery一样,不用选完一个图片的标签再选另一个的,可以将这些图片排成一列,标签选择在右边或者其他的解决办法,反正就是要方便,你可以任选解决方式)
  - 总结就是:上传页面需要支持批量上传和标签选择,并且要方便用户操作。
  - 另外还要能修改已上传的图片信息。(这个应该是另一个功能)
- **后台管理**：
  - 需要密码验证才能访问。

## 用户系统

- **登录系统**：
  - 用户可登录以使用个性化功能（例如搜索历史、上传）。
  - 登录后在导航栏显示用户名和头像。

## 技术说明

- **前端**：
  - 使用 HTML、CSS 和 JavaScript 开发（适合初学者）。
  - 支持桌面端和移动端的响应式设计。
- **未来扩展**：
  - 增强下载文件名自定义功能。
  - 扩展拼音和多语言的模糊搜索支持。
- **灵感来源**：
  - 布局和交互参考 Pixiv、Bilibili、Wallhaven.cc 和 QQ 音乐。

---

增加视频,头像区域

- SQL标签的管理
- 能够修改SQL的标签的管理


功能ok了,现在我想要修改tags的网页,不要添加新的这个button,帮我修改tags的代码(重写html,css,js)
- 我希望能够像excel那样,上面是一排输入框,能够输入新的想要添加的(输入框的位置要对应我接下来的标题),
- 然后输入框的下面是一排按钮:清空输入框,上传到数据库,
- 此外,输入框会响应式布局(屏幕越大,别称输入框越多,
- 但是不会影响下面的数据库中已经有的,下面的表格始终显示全部的别称的标签,
- 例如一个有3个别称,一个有4个别称,则显示别称的个数为4,没有的默认空着,)
- 当我点击“上传到数据库”按钮时,会将输入框中的内容上传到数据库中,下面的也会更新,插入到最上面
- 下面的数据库表格中,当我点击某一行时,输入框会自动填充该行的内容,方便编辑
- 此外,下面的表格我也可以直接点击进行编辑,然后输入完毕之后自动保存上传
- 当我鼠标放在离表格的表头一行的右边时,会出现添加别称输入框的按钮,
- 当我鼠标放在表格的某一行时,那一行的最右边还有一个删除按钮(点击后需要二次确认)
- (鼠标靠近那一行后慢慢显示出来,离开之后慢慢消失,有一个动画)
- 最上面一行标题是中文|英文|日语|拼音|别称|别称...(可能别称不止一个),
- 然后下面是数据库里已经有的列出来,
- 你可以自由美化和调整页面布局以及动画等,要求响应式,以及支持暗色模式,nav还沿用之前的设计


- 我现在想加一个小功能,当我想添加一个新的,而新的数据库里已经有,也就是重复的时候,我可以选择覆盖这个


原神下面有很多子标签,例如“原神/角色/旅行者”、“原神/角色/空”,"原神/稻妻/雷电将军"等等。这种层级结构如何数据库存储?
数据库树形存储?但是我现在的数据库怎么改,要全部重写吗,包括数据库查询的代码什么的

TODO:
https://github.com/Sonder9999/Web_Gallery 这是我的网站的代码,
现在我想增加功能,我应该用怎样的实现方式,列举几种解决方案,例如可以在数据库里加一个flag等
<!-- - logo和sticks文件在gallery,角色立绘(时光流逝)主页不显示,tags分类界面显示 -->
<!-- - 单个图片的显示与隐藏 -->
<!-- - 单个tags的显示与隐藏 -->
<!-- - tags页面的显示标签(例如夏川爱华,yumemirudanshi)这两个是一样的,隐藏夏川爱华或者yumemirudanshi -->
- 显示设置为一级标签(yumemirudanshi)和二级标签(夏川爱华)
- 每个标签的封面
- 如果在tags-gallery页面,点击某个标签,如果该标签是一级标签,则进入该标签的显示界面,显示该标签下的所有二级标签,如果二级标签下还有三级标签,则进入该标签的显示界面,如果该标签是最后一级标签,则进入该标签的图片显示界面(可能需要实现标签的搜索功能)